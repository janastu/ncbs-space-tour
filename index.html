<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ncbs</title>
    <link rel="stylesheet" href="src/css/pannellum.css"/>

    <link rel="stylesheet" href="src/css/content.css"/>

    <script type="text/javascript" src="src/js/routie.js"></script>

    <script type="text/javascript" src="src/js/jquery.min.js"></script>

    <script type="text/javascript" src="src/js/underscore-min.js"></script>
    <script type="text/javascript" src="src/js/backbone-min.js"></script>


    <script type="text/javascript" src="src/js/pannellum.js"></script>
    <script type="text/javascript" src="src/js/libpannellum.js"></script>
    <script type="text/javascript" src="src/js/RequestAnimationFrame.js"></script>

    <script type="text/javascript" src="data.js"></script>
    <style>
    body {
        padding: 0px;
        margin: 0px;
        font-family: "Helvetica", sans-serif;
        overflow: hidden;
    }
    
    </style>
</head>
<body>
<div id="closeintro">
<center>X</center>
</div>
<div id='intro'><h1>Curatorial Note</h1><h2>Space Tour offers a mash-up of oral histories, archival documents and contemporary spatial mapping techniques. The current tour is Obaid Siddiqi's office and lab, with Deepti Trivedi's memories. Click on the information icon and arrows to navigate. Future developments can layer other people's memories and other places.</h2></div>
<div id='panorama'></div>
<div id="title" class="title-text">
    
    
  </div>

  <div id="narration">
    <div id="contents">
      <div id="space-at-the-top" class="space-at-the-top"></div>
     <!--<p class="description">Soon after he moved to NCBS, Obaid Siddiqi started getting interested in hiring students at the BSc and MSc level in his lab. Students from the time would discuss the disproportionate size of his lab, compared to other labs. The trainees would stay for three months to a few years, each getting a glimpse of a research life that would otherwise remain unknown to them.</p>
      <div class="image-container">
      <div class="img-holder">
            <img  style="border:10px solid #ffffff;" src="content/1/OS Lab - Cables repo.JPG">
      </div></div><br><br><center>AUDIO<br>
    <audio controls>
    <source src="content/office/deepti_labtour-trainee_SPACE-TOUR.mp3" type="audio/mpeg">
    </audio> 
       </center>
       </div>
  </div>-->
</div>
    </div>
  

<div id="close">
<center>X</center>
</div>


<script>
//close intro
$( "#closeintro" ).click(function() {
 $("#closeintro").css("display", "none");
 $("#intro").css("display", "none");
	 });
</script>
<script>

pannellum.viewer('panorama', {

    "default": {
        "firstScene": "siddiqi_office_hdr",
        "sceneFadeDuration": 2000,
        "autoLoad": true,
        "hfov": 80,
    	"autoRotate": -0.4,
    	"autoRotateInactivityDelay": 6000,
    	"showFullscreenCtrl": false,
    	"showZoomCtrl": false
    	//"hotSpotDebug": true
    },
    
    "scenes": {
        "siddiqi_office_hdr": {
            "title": "Obaid Siddiqi's Office",
            "type": "equirectangular",
            "panorama": "panoramas/resized/siddiqi_office_hdr.jpg",
            "hotSpots": [
                {
                    "pitch": -12,
                    "yaw": 40,
                    "type": "info",
                    "text": "The reprint pile",
                    "URL": "#&q?i=reprints"
                },
                {
                    "pitch": -7,
                    "yaw": -140,
                    "type": "info",
                    "text": "On the lookout for trainee students",
                    "URL": "#&q?i=lookout"
                },
                {
                    "pitch": 0,
                    "yaw": 190,
                    "type": "scene",
                    "text": "Lab",
                    "sceneId": "1"
                }
            ]
        },

        "1": {
            "title": "Lab view 1",
            "panorama": "panoramas/resized/1.jpg",
            "yaw": 85,
            "hotSpots": [
                {
                    "pitch": -1,
                    "yaw": 85,
                    "type": "scene",
                    "text": "Obaid Siddiqi's Office",
                    "sceneId": "siddiqi_office_hdr"
                },
                {
                    "pitch": 0,
                    "yaw": 170,
                    "type": "scene",
                    "text": "Lab view 2",
                    "sceneId": "table_legs_hdr"
                },
                {
                    "pitch": -1,
                    "yaw": 88,
                    "type": "info",
                    "text": "Fly behaviour in a wind tunnel",
                    "URL": "#&q?i=wind"
                },
                {
                    "pitch": 15,
                    "yaw": 17,
                    "type": "info",
                    "text": "Patch clamp lab",
                    "URL": "#&q?i=patch"
                },
                {
                    "pitch": 16,
                    "yaw": -158,
                    "type": "info",
                    "text": "Interaction with support staff in Obaid Siddiqi's Lab",
                    "URL": "#&q?i=staff"
                },
            ]
        },

        "table_legs_hdr": {
            "title": "Lab view 2",
            "panorama": "panoramas/resized/table_legs_hdr.jpg",
            "hotSpots": [
                {
                    "pitch": 0,
                    "yaw": 50,
                    "type": "scene",
                    "text": "Lab view 1",
                    "sceneId": "1"
                },
                {
                    "pitch": 0,
                    "yaw": -50,
                    "type": "scene",
                    "text": "Lab view 3",
                    "sceneId": "2_hdr"
                },
                {
                    "pitch": -14,
                    "yaw": 13,
                    "type": "info",
                    "text": "Old electrode puller",
                    "URL": "#&q?i=electrode"
                },
                {
                    "pitch": -30,
                    "yaw": -60,
                    "type": "info",
                    "text": "Lab Meetings",
                    "URL": "#&q?i=meetings"
                }

            ]
        },

        "2_hdr": {
            "title": "Lab view 3",
            "panorama": "panoramas/resized/2_hdr.jpg",
            "yaw":-49,
            "hotSpots": [
                {
                    "pitch": 0,
                    "yaw": 100,
                    "type": "scene",
                    "text": "Lab view 2",
                    "sceneId": "table_legs_hdr"
                },
                 {
                    "pitch": 0.1,
                    "yaw": -73,
                    "type": "scene",
                    "text": "Lab view 4",
                    "sceneId": "3_hdr"
                },
                {
                    "pitch": 2,
                    "yaw": 20,
                    "type": "info",
                    "text": "Hand drawn graphs and verification of data",
                    "URL": "#&q?i=graphs"
                },
                {
                    "pitch": -14,
                    "yaw": -41,
                    "type": "info",
                    "text": "The 1999 flood",
                    "URL": "#&q?i=flood"
                }
                
            ]
        },

        "3_hdr": {
            "title": "Lab view 4",
            "panorama": "panoramas/resized/3_hdr.JPG",
            "hotSpots": [
                {
                    "pitch": 0,
                    "yaw": -100,
                    "type": "scene",
                    "text": "Lab view 3",
                    "sceneId": "2_hdr"
                },
                {
                    "pitch": 0.4,
                    "yaw": 7.8,
                    "type": "info",
                    "text": "Student Lab benches",
                    "URL": "#&q?i=benches"
                },
                {
                    "pitch": 2,
                    "yaw": -36,
                    "type": "info",
                    "text": "Fly maze apparatus",
                    "URL": "#&q?i=maze"
                },
                {
                    "pitch": 2.1,
                    "yaw": -82.9,
                    "type": "info",
                    "text": "Lab Spaces",
                    "URL": "#&q?i=spaces"
                }

            ]
        }

        
    }
});
</script>


<script>
//creates narrattion template
template = function(id){
	
	//clear previous content
	$("#title").innerHTML = '';
	$("#contents").innerHTML = '';


	//filter data
	var content = _.find(data, function(item, index, data){
  	return item.id === id;
	});

	
	//setup title
	var titleTemplate = _.template("<h3><%=title%></h3>");
	var titleData = titleTemplate({
    	title: content.title
  	});
	document.getElementById("title").innerHTML = titleData

	//setup content
	var contentTemplate = _.template(
	"<div id='space-at-the-top' class='space-at-the-top'></div>"+
	"<p class='description'><%=des%></p>"+
	"<% _.each(url, function(item, index, url) {var format=item.substr(item.length - 3);"+
			"if( format === 'mp3') {%>"+
				"</div></div><br><br><center>AUDIO<br>"+
    			"<audio controls>"+
    			"<source src='<%=item%>'> type='audio/mpeg'>"+
    			"</audio>"+ 
			"<% } else { %>"+
				"<div class='image-container'><div class='img-holder'><img  style='border:10px solid #ffffff;' src='<%=item%>'>"+
				"</div></div><br><br>"+
			" <% } });  %>"+
			"</div></div><br><br>"
	);
	var contentData = contentTemplate({
    	des: content.description,
    	url: content.urls
  	});
	document.getElementById("contents").innerHTML = contentData
};

</script>


<script>
//show
 routie('*/:name?', function(name) {

if(name.indexOf('&') > -1)
{
    window.temp = name.split('=');
    window.temp2 = temp[1];
    template(temp2);
    document.getElementById('narration').style.display='block'; 
    document.getElementById('title').style.display='block';  
    document.getElementById('close').style.display='block'; 

}
else
    window.location.hash="";
});

//hide
//close fn
$( "#close" ).click(function() {
 $("#close").css("display", "none");
 $("#title").css("display", "none");
 $("#narration").css("display", "none");
 window.location.hash="";
});


</script>



</body>
</html>
